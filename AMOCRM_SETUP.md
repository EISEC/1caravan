# Интеграция с AmoCRM

## Обзор

Интеграция с AmoCRM настроена через внешний API endpoint, который автоматически обрабатывает все заявки с сайта. Никаких дополнительных настроек не требуется.

## Как это работает

### Автоматическая отправка
Все заявки с сайта автоматически отправляются в AmoCRM через внешний API:
- **Заявки на товары** → форма ID: 1
- **Заявки на подбор каравана** → форма ID: 2

### Данные, которые отправляются
- Имя и телефон клиента
- Email и сообщение (если указаны)
- Полная информация о товаре:
  - Название, цена, slug
  - VIN, год выпуска, производитель
  - Страна, масса, габариты
  - Статус, спальные места
- Дополнительное оборудование
- Источник заявки
- Время создания

## API Endpoint

```
POST https://api.amocore.in/1caravanru/integration/one_caravan_ru/qzllbmrlz3orbmzhthdeelbml3kvut09
```

### Формат данных
```json
{
  "form_id": 1,
  "data": [
    {
      "name": "Имя",
      "value": "Иван Иванов"
    },
    {
      "name": "Телефон", 
      "value": "+7 999 123 45 67"
    },
    {
      "name": "Название товара",
      "value": "Караван Adria"
    }
  ]
}
```

## Мониторинг

### Логи
Все операции с AmoCRM логируются в консоль:
- Успешная отправка
- Ошибки сети
- Таймауты

### Статусы отправки
API возвращает статус отправки в AmoCRM:
```json
{
  "success": true,
  "emailSent": true,
  "telegramSent": true,
  "amocrmSent": true,
  "message": "Application submitted successfully"
}
```

## Устранение неполадок

### Ошибка сети
- Проверьте доступность внешнего API
- Проверьте логи сервера

### Таймаут
- API имеет таймаут 10 секунд
- При превышении возвращается ошибка

## Преимущества

### Простота
- Никаких настроек токенов
- Никаких кастомных полей
- Автоматическая обработка

### Надежность
- Внешний API уже настроен
- Проверенная интеграция
- Автоматическое восстановление

### Поддержка
- Все настройки на стороне внешнего API
- Не требует обслуживания
- Автоматические обновления